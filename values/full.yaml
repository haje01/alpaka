
# kafka + dashboard + client + jdbc 커넥터
kafka:
  replicaCount: 3
  defaultReplicationFactor: 2
  numPartitions: 8
  metrics:
    kafka:
      enabled: true
    jmx:
      enabled: true
  serviceMonitor:
    enabled: true
  zookeeper:
    replicaCount: 3
  deleteTopicEnable: true
  podLabels:
    job: kafka

k8dashboard:
  enabled: true
  service:
    externalPort: 8443
  serviceAccount:
    name: k8dash-admin
  extraArgs:
    - --token-ttl=86400
    - --enable-skip-login 

cli:
  enabled: true
  name: kafka-cli
  podLabels: {}
  podAnnotations: {}
  image:
    repository: "haje01/kafka-cli"
    tag: latest
    pullPolicy: Always
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}
  dnsConfig:
    # 필요시 외부 DNS 등록 
    # nameservers:
    #   - 213.234.76.4
    options:
      - name: ndots
        value: "2"

dbcon:
  enabled: true
  replicaCount: 3
  kafkaClientPort: 9092
  image:
    repository: "haje01/kafka-dbcon"
    tag: latest
    pullPolicy: IfNotPresent
  timezone: Asia/Seoul


kafka-ui:
  enabled: true
  yamlApplicationConfig:
    kafka:
      clusters:
        - name: full-kafka
          bootstrapServers: full-kafka-headless:9092
          zookeeper: full-zookeeper-headless:2181
          kafkaConnect:
            - name: dbcon
              address: http://full-alpaka-dbcon:8083
          metrics:
            port: 5556
            type: JMX
    auth:
      type: disabled
    management:
      health:
        ldap:
          enabled: false
  # envs:
  #   config:
  #     KAFKA_CLUSTERS_0_NAME: full-kafka
  #     KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: full-kafka-headless:9092
  #     KAFKA_CLUSTERS_0_METRICS_PORT: "9308"
  #     KAFKA_CLUSTERS_0_ZOOKEEPER: full-zookeeper-headless:2181

prometheus:
  enabled: true
  extraScrapeConfigs: |
    - job_name: kminion-metrics
      scrape_interval: 10s
      scrape_timeout:  5s
      metrics_path: "/metrics"
      static_configs:
      - targets:
        - full-kminion:8080


grafana:
  enabled: true
  adminSecretName: full-grafana-admin
  admin:
    user: admin
    password: admindjemals
  datasources:
    secretDefinition:
      apiVersion: 1
      datasources:
        - name: Prometheus
          type: prometheus
          access: proxy
          url: http://full-prometheus-server
          isDefault: true
  dashboardsProvider:
    enabled: true
  dashboardsConfigMaps:
    - configMapName: full-alpaka-grafana-dashboards-1
      fileName: kminion-cluster_rev1.json
    - configMapName: full-alpaka-grafana-dashboards-2
      fileName: kminion-topic_rev1.json
    - configMapName: full-alpaka-grafana-dashboards-3
      fileName: kminion-groups_rev1.json


kminion:
  enabled: true
  kminion:
    config:
      kafka:
        brokers: ["full-kafka-headless:9092"]

    exporter:
      host: "full-kminion"
      port: 8080

  service:
    annotations:
      prometheus.io/probe: kminion
  
